#!/usr/bin/env node
(function() {

	var fs = require('fs');
	var stringEscape = require('../jsesc.js');
	var strings = process.argv.splice(2);
	var stdin = process.stdin;
	var data;
	var timeout;
	var isObject = false;
	var options = {};
	var log = console.log;

	var main = function() {
		var option = strings[0];

		if (/^(?:-h|--help|undefined)$/.test(option)) {
			log(
				'jsesc v%s - http://mths.be/jsesc',
				stringEscape.version
			);
			log([
				'\nUsage:\n',
				'\tjsesc [string]',
				'\tjsesc [-s | --single-quotes] [string]',
				'\tjsesc [-d | --double-quotes] [string]',
				'\tjsesc [-w | --wrap] [string]',
				'\tjsesc [-e | --escape-everything] [string]',
				'\tjsesc [-6 | --es6] [string]',
				'\tjsesc [-j | --json] [string]',
				'\tjsesc [-o | --object] [stringified_object]', // `JSON.parse()` the argument
				'\tjsesc [-p | --pretty] [string]', // `compact: false`
				'\tjsesc [-v | --version]',
				'\tjsesc [-h | --help]',
				'\nExamples:\n',
				'\tjsesc \'f\xF6o \u2665 b\xE5r \uD834\uDF06 baz\'',
				'\tjsesc --json \'f\xF6o \u2665 b\xE5r \uD834\uDF06 baz\'',
				'\tjsesc --json --escape-everything \'f\xF6o \u2665 b\xE5r \uD834\uDF06 baz\'',
				'\tjsesc --double-quotes --wrap \'f\xF6o \u2665 b\xE5r \uD834\uDF06 baz\'',
				'\techo \'f\xF6o \u2665 b\xE5r \uD834\uDF06 baz\' | jsesc'
			].join('\n'));
			return process.exit(1);
		}

		if (/^(?:-v|--version)$/.test(option)) {
			log('v%s', stringEscape.version);
			return process.exit(1);
		}

		strings.